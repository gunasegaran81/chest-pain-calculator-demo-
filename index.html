
<!DOCTYPE html>
<html>
<head>
<title>HEART & TIMI Aligned Risk Factors</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 5px;
        font-size: 14px;
        background-color: #f9f9f9;
        color: #333;
    }
    h2 {
        color: #004085;
        text-align: center;
        font-size: 18px;
        margin-bottom: 8px;
    }
    label {
        display: block;
        margin-top: 5px;
        font-weight: bold;
        font-size: 13px;
    }
    input[type="number"], select {
        width: 100%;
        padding: 6px;
        margin-top: 2px;
        margin-bottom: 5px;
        font-size: 14px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }
    .checkbox-group {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-gap: 5px;
        margin-top: 5px;
        margin-bottom: 5px;
    }
    .checkbox-item {
        background: #fff;
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
        display: flex;
        align-items: center;
        font-size: 13px;
    }
    .checkbox-item input {
        margin-right: 5px;
    }
    .result {
        margin-top: 10px;
        padding: 8px;
        border-radius: 4px;
        font-size: 16px;
        text-align: center;
        font-weight: bold;
    }
    .low {
        background-color: #d4edda;
        color: #155724;
    }
    .moderate {
        background-color: #fff3cd;
        color: #856404;
    }
    .high {
        background-color: #f8d7da;
        color: #721c24;
    }
    .flowchart {
        margin-top: 10px;
        padding: 8px;
        border: 1px dashed #999;
        background-color: #e0f7fa;
        border-radius: 4px;
        font-size: 13px;
    }
    .remark {
        margin-top: 5px;
        font-size: 13px;
        color: #dc3545;
    }
    button {
        width: 100%;
        padding: 8px;
        font-size: 14px;
        margin-top: 5px;
        border: none;
        border-radius: 4px;
        color: #fff;
    }
    .calculate-btn {
        background-color: #007bff;
    }
    .print-btn {
        background-color: #28a745;
    }
</style>
</head>
<body>

<h2>HEART & TIMI Risk Assessment</h2>

<form id="riskForm">
    <label>Age:
        <input type="number" id="age" required>
    </label>

    <label>Risk Factors:</label>
    <div class="checkbox-group">
        <div class="checkbox-item"><input type="checkbox" class="rf"> Hypertension</div>
        <div class="checkbox-item"><input type="checkbox" class="rf"> Diabetes</div>
        <div class="checkbox-item"><input type="checkbox" class="rf"> Hyperlipidemia</div>
        <div class="checkbox-item"><input type="checkbox" class="rf"> Smoker</div>
        <div class="checkbox-item"><input type="checkbox" class="rf"> Family Hx CAD</div>
        <div class="checkbox-item"><input type="checkbox" class="rf"> Obesity</div>
    </div>

    <label>Known CAD:
        <select id="knownCAD">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </label>

    <label>Aspirin 7 days:
        <select id="aspirin">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </label>

    <label>Angina ≥2/24h:
        <select id="angina">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </label>

    <label>ECG:
        <select id="ecg">
            <option value="0">Normal</option>
            <option value="1">Non-specific</option>
            <option value="2">ST depression</option>
        </select>
    </label>

    <label>Troponin:
        <select id="troponin">
            <option value="0">Normal (or not done)</option>
            <option value="1">1–3x normal</option>
            <option value="2">>3x normal</option>
        </select>
    </label>

    <label>History:
        <select id="history">
            <option value="0">Non-suggestive</option>
            <option value="1">Mildly suggestive</option>
            <option value="2">Highly suggestive</option>
        </select>
    </label>

    <button type="button" class="calculate-btn" onclick="calculate()">Calculate</button>
    <button type="button" class="print-btn" onclick="window.print()">Print</button>
</form>

<div id="output" class="result"></div>
<div id="flowchart" class="flowchart" style="display:none;">
    <strong>Pathway:</strong>
    <ul style="padding-left:15px;">
        <li>HEART 0–3 & TIMI 0–1: Safe discharge</li>
        <li>HEART 4–6 or TIMI 2–3: Observation</li>
        <li>HEART ≥7 or TIMI ≥4: Admit</li>
    </ul>
</div>

<script>
function calculate() {
    let age = parseInt(document.getElementById('age').value);
    let rfCount = document.querySelectorAll('.rf:checked').length;
    let knownCAD = parseInt(document.getElementById('knownCAD').value);
    let aspirin = parseInt(document.getElementById('aspirin').value);
    let angina = parseInt(document.getElementById('angina').value);
    let ecg = parseInt(document.getElementById('ecg').value);
    let troponin = parseInt(document.getElementById('troponin').value);
    let history = parseInt(document.getElementById('history').value);

    let heart = history + ecg;
    heart += (age >= 65) ? 2 : (age >= 45) ? 1 : 0;
    heart += (rfCount >= 3) ? 2 : (rfCount >= 1) ? 1 : 0;
    heart += troponin;

    let timi = 0;
    timi += (age >= 65) ? 1 : 0;
    timi += (rfCount >= 3) ? 1 : 0;
    timi += knownCAD;
    timi += aspirin;
    timi += angina;
    timi += (ecg == 2) ? 1 : 0;
    timi += (troponin > 0) ? 1 : 0;

    let heartClass = heart <= 3 ? 'low' : (heart <= 6 ? 'moderate' : 'high');
    let timiClass = timi <= 1 ? 'low' : (timi <= 3 ? 'moderate' : 'high');

    let remark = troponin === 0 ? "<div class='remark'>* Troponin not taken or pending.</div>" : "";

    document.getElementById('output').innerHTML =
        `<div class="${heartClass}">HEART: <strong>${heart}</strong> | TIMI: <strong>${timi}</strong></div>` +
        remark;

    document.getElementById('flowchart').style.display = 'block';
}
</script>

</body>
</html>
