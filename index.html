
<!DOCTYPE html>
<html>
<head>
<title>HEART & TIMI Integrated System</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { color: #003366; }
    label { display: block; margin-top: 10px; }
    input, select { margin-top: 5px; margin-bottom: 10px; }
    .result { margin-top: 20px; font-weight: bold; padding: 10px; border: 1px solid #ccc; width: fit-content; }
    .low { background-color: #d4edda; color: #155724; }
    .moderate { background-color: #fff3cd; color: #856404; }
    .high { background-color: #f8d7da; color: #721c24; }
    .flowchart { margin-top: 30px; padding: 15px; border: 2px dashed #999; background-color: #f0f8ff; }
    button { margin-top: 15px; padding: 8px 16px; }
</style>
</head>
<body>

<h2>HEART & TIMI Integrated Risk Assessment</h2>

<form id="riskForm">
    <label>Age:
        <input type="number" id="age" required>
    </label>

    <label>Risk Factors (tick all that apply):</label>
    <input type="checkbox" class="rf"> Hypertension
    <input type="checkbox" class="rf"> Diabetes
    <input type="checkbox" class="rf"> Hyperlipidemia
    <input type="checkbox" class="rf"> Smoker
    <input type="checkbox" class="rf"> Family Hx CAD
    <input type="checkbox" class="rf"> Obesity

    <label>Known CAD (>50% stenosis):
        <select id="knownCAD">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </label>

    <label>Aspirin use last 7 days:
        <select id="aspirin">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </label>

    <label>Recent angina (≥2 episodes/24hrs):
        <select id="angina">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </label>

    <label>ECG findings:
        <select id="ecg">
            <option value="0">Normal</option>
            <option value="1">Non-specific changes</option>
            <option value="2">Significant ST depression</option>
        </select>
    </label>

    <label>Troponin result:
        <select id="troponin">
            <option value="0">Normal</option>
            <option value="1">Elevated</option>
        </select>
    </label>

    <label>History (subjective assessment):
        <select id="history">
            <option value="0">Non-suggestive</option>
            <option value="1">Mildly suggestive</option>
            <option value="2">Highly suggestive</option>
        </select>
    </label>

    <button type="button" onclick="calculate()">Calculate & Show Flowchart</button>
    <button type="button" onclick="window.print()">Print</button>
</form>

<div id="output" class="result"></div>
<div id="flowchart" class="flowchart" style="display:none;">
    <h3>Chest Pain Clinical Pathway:</h3>
    <ul>
        <li><strong>HEART 0–3 (Low Risk) & TIMI 0–1:</strong> Consider safe discharge with follow-up</li>
        <li><strong>HEART 4–6 or TIMI 2–3:</strong> Observation, serial ECG & troponins</li>
        <li><strong>HEART ≥7 or TIMI ≥4:</strong> Admit, urgent cardiology review</li>
    </ul>
    <p>Always consider clinical judgement in final decision-making.</p>
</div>

<script>
function calculate() {
    let age = parseInt(document.getElementById('age').value);
    let rfCount = document.querySelectorAll('.rf:checked').length;
    let knownCAD = parseInt(document.getElementById('knownCAD').value);
    let aspirin = parseInt(document.getElementById('aspirin').value);
    let angina = parseInt(document.getElementById('angina').value);
    let ecg = parseInt(document.getElementById('ecg').value);
    let troponin = parseInt(document.getElementById('troponin').value);
    let history = parseInt(document.getElementById('history').value);

    // HEART Score
    let heart = history + ecg;
    heart += (age >= 65) ? 2 : (age >= 45) ? 1 : 0;
    heart += (rfCount >= 3) ? 2 : (rfCount >= 1) ? 1 : 0;
    heart += (troponin == 1) ? 2 : 0;

    // TIMI Score
    let timi = 0;
    timi += (age >= 65) ? 1 : 0;
    timi += (rfCount >= 3) ? 1 : 0;
    timi += knownCAD;
    timi += aspirin;
    timi += angina;
    timi += (ecg == 2) ? 1 : 0;
    timi += troponin;

    // Color coding
    let heartClass = heart <= 3 ? 'low' : (heart <= 6 ? 'moderate' : 'high');
    let timiClass = timi <= 1 ? 'low' : (timi <= 3 ? 'moderate' : 'high');

    document.getElementById('output').innerHTML =
        `<div class="${heartClass}">HEART Score: <strong>${heart}</strong></div>
         <div class="${timiClass}">TIMI Score: <strong>${timi}</strong></div>`;

    document.getElementById('flowchart').style.display = 'block';
}
</script>

</body>
</html>
